<!--<!DOCTYPE html>-->
<!--<html xmlns:th="http://www.thymeleaf.org">-->
<!--<head>-->
<!--    <meta charset="UTF-8" />-->
<!--    <title>Phiếu đồng ý tiêm chủng</title>-->
<!--    <style>-->
<!--        .status {-->
<!--            font-weight: bold;-->
<!--            margin-bottom: 12px;-->
<!--            padding: 8px 12px;-->
<!--            border-radius: 4px;-->
<!--            display: inline-block;-->
<!--        }-->

<!--        .accepted {-->
<!--            color: #2e7d32;-->
<!--            background-color: #c8e6c9;-->
<!--        }-->

<!--        .declined {-->
<!--            color: #c62828;-->
<!--            background-color: #ffcdd2;-->
<!--        }-->

<!--        .unconfirmed {-->
<!--            color: #f57c00;-->
<!--            background-color: #ffe0b2;-->
<!--        }-->

<!--        .overdue {-->
<!--            color: #6d4c41;-->
<!--            background-color: #d7ccc8;-->
<!--        }-->

<!--        button {-->
<!--            padding: 8px 16px;-->
<!--            margin-right: 10px;-->
<!--            font-size: 14px;-->
<!--            border: none;-->
<!--            border-radius: 4px;-->
<!--            cursor: pointer;-->
<!--            background-color: #4CAF50;-->
<!--            color: white;-->
<!--        }-->

<!--        button.disabled {-->
<!--            background-color: #ccc !important;-->
<!--            cursor: not-allowed;-->
<!--        }-->

<!--        button.disagree {-->
<!--            background-color: #e53935;-->
<!--        }-->
<!--    </style>-->
<!--</head>-->
<!--<body>-->

<!--&lt;!&ndash; Hiển thị lỗi nếu có &ndash;&gt;-->
<!--<div th:if="${error}" class="error">-->
<!--    <p th:text="${error}" style="color: red"></p>-->
<!--</div>-->

<!--<div th:if="${vaccinationConsent != null}">-->
<!--    <h2>Phiếu xác nhận tiêm chủng của học sinh <span th:text="${vaccinationConsent.student.fullName}"></span></h2>-->
<!--    <p>Debug status:-->
<!--        <span th:text="${vaccinationConsent.status != null} ? ${vaccinationConsent.status} : 'Không có status'">?</span>-->
<!--    </p>-->

<!--    &lt;!&ndash; Hiển thị trạng thái &ndash;&gt;-->
<!--    <div th:switch="${vaccinationConsent.status.name()}">-->
<!--        <span th:case="'ACCEPTED'" class="status accepted">Đã đồng ý</span>-->
<!--        <span th:case="'DECLINED'" class="status declined">Đã từ chối</span>-->
<!--        <span th:case="'OVERDUE'" class="status overdue">Đã hết hạn</span>-->
<!--        <span th:case="*" class="status unconfirmed">Chưa xác nhận</span>-->
<!--    </div>-->

<!--    <div th:object="${vaccinationConsent}">-->
<!--        <p><strong>Ngày kiểm tra:</strong>-->
<!--            <span th:text="*{schedule.injectionDate}"></span></p>-->

<!--        <p><strong>Loại vaccine:</strong></p>-->
<!--        <p th:text="*{schedule.vaccineType}"></p>-->

<!--        <p><strong>Độ tuổi khuyến nghị:</strong></p>-->
<!--        <p th:text="*{schedule.recommendedAgeMonths}"></p>-->

<!--        <p><strong>Ghi chú:</strong></p>-->
<!--        <p th:text="*{schedule.notes}"></p>-->
<!--    </div>-->

<!--    &lt;!&ndash; Form luôn hiển thị nhưng nút sẽ được vô hiệu hóa nếu không phải UNCONFIRMED &ndash;&gt;-->
<!--    <form th:action="@{/parent/confirm/confirm-vaccination}" method="post">-->
<!--        <input type="hidden" name="vaccinatonConsentId" th:value="${vaccinationConsent.id}" />-->

<!--        <p>Bạn có đồng ý cho con em tham gia khám sức khỏe?</p>-->

<!--        &lt;!&ndash; Nút Đồng ý &ndash;&gt;-->
<!--        <button type="submit" name="response" value="agree"-->
<!--                th:classappend="${vaccinationConsent.status.name() != 'UNCONFIRMED'} ? 'disabled'"-->
<!--                th:disabled="${vaccinationConsent.status.name() != 'UNCONFIRMED'}">-->
<!--            Đồng ý-->
<!--        </button>-->

<!--        &lt;!&ndash; Nút Không đồng ý &ndash;&gt;-->
<!--        <button type="submit" name="response" value="disagree"-->
<!--                class="disagree"-->
<!--                th:classappend="${vaccinationConsent.status.name() != 'UNCONFIRMED'} ? ' disabled'"-->
<!--                th:disabled="${vaccinationConsent.status.name() != 'UNCONFIRMED'}">-->
<!--            Không đồng ý-->
<!--        </button>-->
<!--    </form>-->
<!--</div>-->
<!--</body>-->
<!--</html>-->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <title>Phiếu đồng ý tiêm chủng</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="/assets/css/parent/confirm-vaccination-consent.css">
</head>
<body style="background-color: #fff0f5;">
<div class="container mt-5">
    <div class="card shadow p-4">
        <h2 class="text-center text-uppercase mb-4 text-pink">
            Phiếu xác nhận tiêm chủng của học sinh
            <span th:text="${vaccinationConsent.student.fullName}"></span>
        </h2>

        <!-- Thông báo lỗi -->
        <div th:if="${error}" class="alert alert-danger" th:text="${error}"></div>

        <!-- Trạng thái -->
        <div class="mb-3">
            <span th:switch="${vaccinationConsent.status.name()}">
                <span th:case="'ACCEPTED'" class="badge rounded-pill bg-success px-3 py-2">Đã đồng ý</span>
                <span th:case="'DECLINED'" class="badge rounded-pill bg-danger px-3 py-2">Đã từ chối</span>
                <span th:case="'OVERDUE'" class="badge rounded-pill bg-secondary px-3 py-2">Đã hết hạn</span>
                <span th:case="*" class="badge rounded-pill bg-warning text-dark px-3 py-2">Chưa xác nhận</span>
            </span>
        </div>

        <div th:object="${vaccinationConsent}" class="mb-4">
            <p><strong>Ngày tiêm:</strong>
                <span th:text="*{#temporals.format(schedule.injectionDate, 'dd/MM/yyyy')}"></span></p>

            <p><strong>Loại vaccine:</strong>
                <span th:text="*{schedule.vaccineType}"></span></p>

            <p><strong>Độ tuổi khuyến nghị:</strong>
                <span th:text="*{schedule.recommendedAgeMonths}"></span> tháng</p>

            <p><strong>Ghi chú:</strong>
                <span th:text="*{schedule.notes} ?: 'Không có ghi chú.'"></span></p>
        </div>

        <!-- Form xác nhận -->
        <form th:action="@{/parent/confirm/confirm-vaccination}" method="post">
            <input type="hidden" name="vaccinatonConsentId" th:value="${vaccinationConsent.id}" />

            <p class="mb-3">Bạn có đồng ý cho con em tham gia tiêm chủng?</p>

            <div class="d-flex gap-3">
                <!-- Đồng ý -->
                <button type="submit"
                        name="response"
                        value="agree"
                        th:classappend="${vaccinationConsent.status.name() != 'UNCONFIRMED'} ? ' disabled'"
                        th:disabled="${vaccinationConsent.status.name() != 'UNCONFIRMED'}"
                        class="btn btn-pink">
                    Đồng ý
                </button>

                <!-- Không đồng ý -->
                <button type="submit"
                        name="response"
                        value="disagree"
                        th:classappend="${vaccinationConsent.status.name() != 'UNCONFIRMED'} ? ' disabled'"
                        th:disabled="${vaccinationConsent.status.name() != 'UNCONFIRMED'}"
                        class="btn btn-outline-danger">
                    Không đồng ý
                </button>
            </div>
        </form>
    </div>
</div>

<script src="/assets/js/parent/confirm-vaccination-consent.js"></script>
</body>
</html>
